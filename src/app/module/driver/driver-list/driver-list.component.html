<div class="container mt-4">
  <!-- ðŸ§­ Page Header -->
  <div class="row mb-3">
    <div class="col-12 text-center">
      <h3 class="fw-bold text-uppercase mb-3">Drivers</h3>
      <hr class="mx-auto" style="width: 100px; border-top: 3px solid #007bff" />
    </div>
  </div>
  <!-- Search Bar -->
  <div class="row mb-3 align-items-center">
    <div class="col-md-6 d-flex mb-2">
      <input
        type="text"
        class="form-control me-2"
        placeholder="Search by phone number"
        [(ngModel)]="searchTerm"
      />
      <button class="btn btn-primary" (click)="onSearch()">Search</button>
    </div>
    <div class="col-md-6 text-md-end text-center mb-2">
      <small class="text-muted">
        Showing {{ (pageNumber - 1) * pageSize + 1 }} -
        {{ Math.min(pageNumber * pageSize, totalRecords) }} of
        {{ totalRecords }}
      </small>
    </div>
  </div>

  <!-- ðŸ§¾ Table (Fixed height, scrollable) -->
  <div class="ag-theme-alpine" style="height: 500px; width: 100%">
    <ag-grid-angular
      [rowData]="rowData"
      [columnDefs]="columnDefs"
      [rowSelection]="'multiple'"
      [pagination]="false"
      [domLayout]="'normal'"
      [rowSelection]="'single'"
      [suppressRowClickSelection]="false"
      [enableCellTextSelection]="true"
      [animateRows]="true"
      class="ag-theme-alpine w-100 h-100"
    ></ag-grid-angular>
  </div>

  <!-- ðŸ“„ Pagination + Page Size -->
  <div class="d-flex flex-wrap justify-content-between align-items-center mt-4">
    <div class="d-flex align-items-center mb-2">
      <label class="me-2 fw-semibold">Rows per page:</label>
      <select
        class="form-select"
        style="width: auto"
        [(ngModel)]="pageSize"
        (change)="onPageSizeChange($event)"
      >
        <option [value]="5">5</option>
        <option [value]="10">10</option>
        <option [value]="20">20</option>
        <option [value]="50">50</option>
      </select>
    </div>

    <nav class="mb-2">
      <ul class="pagination mb-0">
        <li
          class="page-item"
          [class.disabled]="pageNumber === 1"
          (click)="onPageChange(pageNumber - 1)"
        >
          <a class="page-link">Previous</a>
        </li>

        <li
          class="page-item"
          *ngFor="let p of totalPagesArray"
          [class.active]="pageNumber === p"
          (click)="onPageChange(p)"
        >
          <a class="page-link">{{ p }}</a>
        </li>

        <li
          class="page-item"
          [class.disabled]="pageNumber === totalPages"
          (click)="onPageChange(pageNumber + 1)"
        >
          <a class="page-link">Next</a>
        </li>
      </ul>
    </nav>
  </div>

  <!-- Loader -->
  <div *ngIf="loading" class="text-center mt-3">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>
</div>
